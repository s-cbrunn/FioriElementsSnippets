sap.ui.define(["sap/ui/core/mvc/Controller","de/scbrunn/fesnippet/model/FolderStructure","de/scbrunn/fesnippet/libs/showdown"],function(e,t){"use strict";return e.extend("de.scbrunn.fesnippet.controller.App",{onInit:function(){this._theme={light:false};this.getView().setModel(t.getJSONModel());t.getFolderStructure()},onToggleOpenState:function(e){var o=e.getParameter("itemIndex");var r=e.getParameter("itemContext");var i=r.getPath();var l=this.getView().getModel().getObject(i);var n=this.byId("idNavTree");t.sendRequest(l.childUrl,i)},onSelectTopic:function(e,o,r){if(o!==undefined){var i=this.byId("idDetailPage");i.setTitle(r);t.getDocument(o).then(function(e){var t=new showdown.Converter;var o=showdown.getOptions();t.setOption("tables",true);t.setOption("completeHTMLDocument",true);if(window.location.hostname!=="localhost"){e=e.replace("/img/","https://raw.githubusercontent.com/s-cbrunn/FioriElementsSnippets/main/img/")}var r=t.makeHtml(e);debugger;r=r.replace(new RegExp("<pre>","g"),'<pre style="padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; color: #8fb774; background-color: #2f3843; border-radius: 6px; border-left: .6rem solid #6bd3ff; border-left-width: 0.6rem; border-left-style: solid; border-left-color: rgb(107, 211, 255); ">');r=r.replace(new RegExp("<blockquote>","g"),'<blockquote style="padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; color: #8fb774; background-color: #2f3843; border-radius: 6px; border-left: .6rem solid #d6dc74; border-left-width: 0.6rem; border-left-style: solid; border-left-color: rgb(214, 220, 116); ">');r=r.replace(new RegExp("</head>","g"),"<style>table, th, td { border: 1px solid black; border-collapse: collapse; border-color: #345564 } </style></head>");r=r.replace(new RegExp("<table>","g"),'<table style="border: 1px solid black">');var i=this.byId("idHTMLContent");i.setContent("");i.setContent(r)}.bind(this))}},onChangeTheme:function(e){if(this._theme.light===true){sap.ui.getCore().applyTheme("sap_fiori_3_dark");this._theme.light=false}else{sap.ui.getCore().applyTheme("sap_fiori_3");this._theme.light=true}}})});