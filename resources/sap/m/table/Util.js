/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/library","sap/ui/core/Core","sap/ui/core/theming/Parameters"],function(M,C,T){"use strict";var U={};var d="";var b=parseFloat(M.BaseFontSize);U.measureText=(function(){var e=0.05;var c=document.createElement("canvas").getContext("2d");var s=function(){d=[parseFloat(T.get({name:"sapMFontMediumSize"})||"0.875rem")*b+"px",T.get({name:"sapUiFontFamily"})||"Arial"].join(" ");return d;};C.attachThemeChanged(s);return function(t,f){c.font=f||d||s();return c.measureText(t||"").width/b+e;};})();U.calcTypeWidth=(function(){var B=0;var D=[2023,9,26,22,47,58,999];var u=new Date(Date.UTC.apply(0,D));var l=new(Function.prototype.bind.apply(Date,[null].concat(D)))();var n={Byte:3,SByte:3,Int16:5,Int32:9,Int64:12,Single:6,Float:12,Double:13,Decimal:15};C.attachThemeChanged(function(){B=0;});return function(t,s){var a=t.getMetadata().getName().split(".").pop();if(a=="Boolean"){if(!B){var r=C.getLibraryResourceBundle("sap.ui.core");var y=U.measureText(r.getText("YES"));var N=U.measureText(r.getText("NO"));B=Math.max(y,N);}return B;}if(a=="String"||t.isA("sap.ui.model.odata.type.String")){var m=s&&s.maxWidth||19;var i=t.getConstraints().maxLength||0;if(!i){return Math.max(Math.min(10,m),m*0.75);}if(i*0.25>m){return m;}var S=U.measureText("A".repeat(i));if(i<m||m<10){return Math.min(S,m);}var w=Math.log(S-m*0.16)/Math.log(m/3)*(m/2)*Math.pow(m/19,1/S);return Math.min(w,S,m);}if(a.startsWith("Date")||a.startsWith("Time")){var o=t.getFormatOptions().UTC?u:l;var c=o.toLocaleDateString();if(a=="TimeOfDay"){c=new Intl.DateTimeFormat('de',{hour:'numeric',minute:'numeric',second:'numeric'}).format(o);c=t.formatValue(c,"string");}else if(t.isA("sap.ui.model.odata.type.Time")){c=t.formatValue({__edmType:"Edm.Time",ms:u.valueOf()},"string");}else{c=t.formatValue(o,"string");}return U.measureText(c);}if(n[a]){var e=t.getConstraints().scale||0;var p=t.getConstraints().precision||20;p=Math.min(p,n[a]);var f=2*Math.pow(10,p-e-1);f=t.formatValue(f,"string");return U.measureText(f);}return s&&s.defaultWidth||8;};})();U.calcHeaderWidth=(function(){var h="";var g=function(){if(!h){h=[T.get({name:"sapUiColumnHeaderFontWeight"})||"normal",d].join(" ");}return h;};C.attachThemeChanged(function(){h="";});return function(H,c,m,i){var a=H.length;m=m||19;i=i||2;if(c>m){return m;}if(i>a){return i;}c=Math.max(c,i);if(c>a){return c;}var o=U.measureText(H,g());o=Math.min(o,m*0.7);var f=Math.max(1,1-(Math.log(Math.max(c-1.7,0.2))/Math.log(m*0.5))+1);var e=f*c;var j=Math.max(0,o-e);var k=(j<0.15)?o:e+j*(1-1/c)/Math.E;return k;};})();return U;},false);
