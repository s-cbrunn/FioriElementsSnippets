/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/Base","sap/base/Log"],function(B,L){"use strict";var a={createRenameChangeHandler:function(r){r.changePropertyName=r.changePropertyName||"newText";return{applyChange:function(c,C,p){var m=p.modifier;var P=r.propertyName;var o=c.getDefinition();var t=o.texts[r.changePropertyName];var v=t.value;return Promise.resolve().then(function(){if(o.texts&&t&&typeof(v)==="string"){return m.getPropertyBindingOrProperty(C,P).then(function(b){c.setRevertData(b);return m.setPropertyBindingOrProperty(C,P,v);});}L.error("Change does not contain sufficient information to be applied: ["+o.layer+"]"+o.namespace+"/"+o.fileName+"."+o.fileType);return undefined;});},revertChange:function(c,C,p){var m=p.modifier;var P=r.propertyName;var o=c.getRevertData();if(o||o===""){m.setPropertyBindingOrProperty(C,P,o);c.resetRevertData();return;}L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");},completeChangeContent:function(c,s,p){var C=c.getDefinition();var b=r.changePropertyName;var t=r.translationTextType;return Promise.resolve().then(function(){return p.modifier.bySelector(c.getSelector(),p.appComponent);}).then(function(o){C.content.originalControlType=p.modifier.getControlType(o);if(typeof(s.value)==="string"){B.setTextInChange(C,b,s.value,t);}else{return Promise.reject(new Error("oSpecificChangeInfo.value attribute required"));}});},getCondenserInfo:function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:r.propertyName||r.changePropertyName};},getChangeVisualizationInfo:function(c){var n=(c.getDefinition().texts&&c.getDefinition().texts[r.changePropertyName]);return{payload:{originalLabel:c.getRevertData(),newLabel:n&&n.value}};}};}};return a;},true);
