/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/LayerUtils"],function(L){"use strict";var S={};S.applyChange=function(c,C,p){var s;var m=p.modifier;return Promise.resolve().then(m.getStashed.bind(m,C)).then(function(r){s=r;return m.findIndexInParentAggregation(C);}).then(function(o){this.setChangeRevertData(c,s,o);if(L.isDeveloperLayer(c.getLayer())){return m.setStashed(C,true);}return m.setVisible(C,false);}.bind(this));};function h(u,r,U,m){var a;if(u!==r.originalIndex){var p=m.getParent(U);return Promise.return().then(m.getParentAggregationName.bind(m,U)).then(function(R){a=R;return m.removeAggregation(p,a,U);}).then(m.insertAggregation.bind(m,p,a,U,r.originalIndex));}return Promise.resolve();}S.revertChange=function(c,C,p){var r=c.getRevertData();var m=p.modifier;return Promise.resolve().then(function(){if(L.isDeveloperLayer(c.getLayer())){var u=m.setStashed(C,r.originalValue,p.appComponent);if(u){return Promise.resolve().then(m.findIndexInParentAggregation.bind(m,u)).then(function(U){return h(U,r,u,m);});}return Promise.resolve();}return m.setVisible(C,!r.originalValue);}).then(function(){c.resetRevertData();});};S.completeChangeContent=function(){};S.setChangeRevertData=function(c,v,o){c.setRevertData({originalValue:v,originalIndex:o});};S.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.Reverse,uniqueKey:"stashed"};};return S;});
