/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/Element","./WebComponentMetadata","./WebComponentRenderer","sap/ui/core/Core","sap/base/strings/hyphenate","sap/base/strings/camelize","sap/ui/core/library"],function(t,e,r,o,n,i,a,s){"use strict";var p=s.TextDirection;var u=function(t){if(t.id&&n.byId(t.id)){return n.byId(t.id)}};var f=function(t,e,r){if(e===undefined){e=0}if(r===undefined){r=2}if(t==null){return t}if(t instanceof window.HTMLElement){var o=u(t);return o?o:t}if(e<r){if(Array.isArray(t)){return t.map(f,e+1,r)}if(typeof t==="object"){var n={};for(var i in t){if(t.hasOwnProperty(i)){n[i]=f(t[i],e+1,r)}}return n}}return t};var h=t.extend("sap.ui.webc.common.WebComponent",{metadata:{stereotype:"webcomponent",abstract:true,library:"sap.ui.core"},constructor:function(e,r){t.apply(this,arguments);this.__onInvalidationBound=this.__onInvalidation.bind(this);this.__delegates={onAfterRendering:this.__onAfterRenderingDelegate};this.addDelegate(this.__delegates,true,this,false);this.__attachCustomEventsListeners()},renderer:o},r);h.prototype._setSlot=function(t,e){if(t){var r=this.getMetadata().getAggregationSlot(e);t.__slot=r}};h.prototype._unsetSlot=function(t){if(t){delete t.__slot}};h.prototype.setAggregation=function(e,r,o){var n=t.prototype.setAggregation.apply(this,arguments);this._setSlot(r,e);return n};h.prototype.insertAggregation=function(e,r,o,n){var i=t.prototype.insertAggregation.apply(this,arguments);this._setSlot(r,e);return i};h.prototype.addAggregation=function(e,r,o){var n=t.prototype.addAggregation.apply(this,arguments);this._setSlot(r,e);return n};h.prototype.removeAggregation=function(e,r,o){var n=t.prototype.removeAggregation.apply(this,arguments);this._unsetSlot(n);return n};h.prototype.removeAllAggregation=function(e,r){var o=t.prototype.removeAllAggregation.apply(this,arguments);o.forEach(function(t){this._unsetSlot(t)},this);return o};h.prototype.__onAfterRenderingDelegate=function(){var t=this.getDomRef();window.customElements.whenDefined(t.localName).then(function(){t.attachInvalidate(this.__onInvalidationBound);if(t._individualSlot){this.__slot=t._individualSlot}this.__updateObjectProperties(t)}.bind(this))};h.prototype.__updateObjectProperties=function(t){var e=this.getMetadata().getPropertiesByMapping("attribute");for(var r in e){var o=e[r];var n=o.get(this);if(o.type==="object"||typeof n==="object"){var i=o._sMapTo?o._sMapTo:r;t[i]=n}}};h.prototype.__onInvalidation=function(t){if(t.type==="property"){var e=t.name;var r=t.newValue;var o=this.getMetadata().getProperty(e);if(o){o.set(this,r)}}};h.prototype.__attachCustomEventsListeners=function(){var t=this.getMetadata().getEvents();for(var e in t){var r=i(e);this.attachBrowserEvent(r,this.__handleCustomEvent,this)}};h.prototype.__detachCustomEventsListeners=function(){var t=this.getMetadata().getEvents();for(var e in t){if(t.hasOwnProperty(e)){var r=i(e);this.detachBrowserEvent(r,this.__handleCustomEvent,this)}}};h.prototype.__handleCustomEvent=function(t){var e=t.type;var r=a(e);var o=this.__formatEventData(t.detail);var n=this.getMetadata().getEvent(r);var i=!n.fire(this,o);if(i){t.preventDefault()}};h.prototype.__formatEventData=function(t){if(typeof t==="object"){return f(t)}return{}};h.prototype.__callPublicMethod=function(t,r){if(!this.getDomRef()){throw new Error("Method called before custom element has been created by: "+this.getId())}var o=Array.from(r).map(function(t){if(t instanceof e){return t.getDomRef()}return t});return this.getDomRef()[t].apply(this.getDomRef(),o)};h.prototype.__callPublicGetter=function(t){if(!this.getDomRef()){throw new Error("Getter called before custom element has been created by: "+this.getId())}return this.getDomRef()[t]};h.prototype.destroy=function(){var e=this.getDomRef();this.__detachCustomEventsListeners();if(e&&typeof e.detachInvalidate==="function"){e.detachInvalidate(this.__onInvalidationBound)}return t.prototype.destroy.call(this,arguments)};h.prototype._mapTextDirection=function(t){if(t===p.Inherit){return null}return t.toLowerCase()};return h});