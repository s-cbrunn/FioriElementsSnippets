/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/m/Label","sap/ui/core/Core"],function(E,L,C){"use strict";var a=E.extend("sap.ui.mdc.table.Column",{metadata:{library:"sap.ui.mdc",defaultAggregation:"template",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minWidth:{type:"float",group:"Behavior",defaultValue:8},header:{type:"string"},headerVisible:{type:"boolean",group:"Misc",defaultValue:true},hAlign:{type:"sap.ui.core.HorizontalAlign",defaultValue:"Begin"},importance:{type:"sap.ui.core.Priority",group:"Behavior",defaultValue:"None"},initialIndex:{type:"int",defaultValue:-1},dataProperty:{type:"string"}},events:{},aggregations:{template:{type:"sap.ui.core.Control",multiple:false},creationTemplate:{type:"sap.ui.core.Control",multiple:false}}}});a.prototype.init=function(){this.mSkipPropagation={template:true,creationTemplate:true};};a.prototype.getTemplate=function(c){var t=this.getAggregation("template");if(c&&this._oTemplateClone&&this._oTemplateClone.bIsDestroyed){this._oTemplateClone=null;}if(!this._oTemplateClone&&t){this._oTemplateClone=t.clone();}return c?this._oTemplateClone:t;};a.prototype.getCreationTemplate=function(c){var o=this.getAggregation("creationTemplate");if(c&&this._oCreationTemplateClone&&this._oCreationTemplateClone.bIsDestroyed){this._oCreationTemplateClone=null;}if(!this._oCreationTemplateClone&&o){this._oCreationTemplateClone=o.clone();}return c?this._oCreationTemplateClone:o;};a.prototype.setHeaderVisible=function(h){if(this.getHeaderVisible()===h){return this;}this.setProperty("headerVisible",h,true);this._updateColumnHeaderControl();return this;};a.prototype.setHeader=function(h){this.setProperty("header",h,true);this._updateColumnHeaderControl();var l=this.getDomRef();if(l){l.textContent=this.getHeader();}return this;};a.prototype.setHAlign=function(h){this.setProperty("hAlign",h,true);this._updateColumnHeaderControl();return this;};a.prototype._updateColumnWidth=function(w){var i=C.byId(this.getId()+"-innerColumn");if(!i||!this.getWidth()){this.setProperty("width",w);}if(i&&!i.getWidth()){i.setWidth(w);}};a.prototype._updateColumnHeaderControl=function(){if(this._oColumnHeaderLabel){this._oColumnHeaderLabel.setWidth(this.getHeaderVisible()?null:"0px");this._oColumnHeaderLabel.setWrapping(this._bMobileTable&&!this._bResizable&&this.getHeaderVisible());this._oColumnHeaderLabel.setText(this.getHeader());this._oColumnHeaderLabel.setTextAlign(this.getHAlign());}};a.prototype.updateColumnResizing=function(e){this._bResizable=!!e;this._updateColumnHeaderControl();};a.prototype.setParent=function(p){var P=this.getParent();E.prototype.setParent.apply(this,arguments);if(p&&p.isA("sap.ui.mdc.Table")){if(p.getDomRef()){this._addAriaStaticDom();}else{this.oAfterRenderingDelegate={onAfterRendering:function(){this._addAriaStaticDom();this.getParent().removeDelegate(this.oAfterRenderingDelegate);}};p.addDelegate(this.oAfterRenderingDelegate,this);}}else if(!p){P.removeDelegate(this.oAfterRenderingDelegate);this._removeAriaStaticDom();}};a.prototype.getColumnHeaderControl=function(m,r){if(this._oColumnHeaderLabel){this._oColumnHeaderLabel.destroy();}this._oColumnHeaderLabel=new L(this.getId()+"-innerColumnHeader",{wrappingType:m?"Hyphenated":null});this._bMobileTable=m;this.updateColumnResizing(r);return this._oColumnHeaderLabel;};a.prototype._removeAriaStaticDom=function(){var d=this.getDomRef();if(d){d.parentNode.removeChild(d);}};a.prototype._addAriaStaticDom=function(){var i=document.createElement("div");i.setAttribute("id",this.getId());i.setAttribute("class","sapUiInvisibleText");i.setAttribute("aria-hidden","true");var h=document.createTextNode(this.getHeader());i.appendChild(h);var s=C.getStaticAreaRef();if(i&&s){s.appendChild(i);}};a.prototype.exit=function(){if(this._oTemplateClone){this._oTemplateClone.destroy();this._oTemplateClone=null;}if(this._oCreationTemplateClone){this._oCreationTemplateClone.destroy();this._oCreationTemplateClone=null;}if(this._oColumnHeaderLabel){this._oColumnHeaderLabel.destroy();this._oColumnHeaderLabel=null;}this._removeAriaStaticDom();};return a;});
