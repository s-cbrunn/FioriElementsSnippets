/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./QueryPanel","sap/m/HBox","sap/m/CheckBox","sap/ui/layout/Grid"],function(Q,H,C,G){"use strict";var a=Q.extend("sap.ui.mdc.p13n.panels.GroupPanel",{metadata:{properties:{enableShowField:{type:"boolean",defaultValue:false}}},renderer:{}});a.prototype._createQueryRowGrid=function(i){var k=i.name;var s=this._createKeySelect(k);var g=new G({containerQuery:true,defaultSpan:this.getEnableShowField()?"XL4 L4 M4 S4":"XL6 L6 M6 S6",content:[s]}).addStyleClass("sapUiTinyMargin");if(this.getEnableShowField()){var c=this._createCheckBox(i);g.addContent(c);}return g;};a.prototype._createCheckBox=function(i){var k=i.name;var c=new H({alignItems:"Center",items:[new C({enabled:k?true:false,selected:i.hasOwnProperty("showIfGrouped")?i.showIfGrouped:true,select:function(e){var p=e.getSource().getParent().getParent().getParent().getParent().getParent().getParent();var k=e.oSource.getParent().getParent().getContent()[0].getSelectedItem().getKey();this._changeShowIfGrouped(k,e.getParameter("selected"));p.fireChange({reason:"change",item:{name:k,grouped:true,showIfGrouped:e.getParameter("selected")}});}.bind(this),text:this.getResourceText("group.PERSONALIZATION_GROUP_CHECKBOX")})]});return c;};a.prototype._changeShowIfGrouped=function(k,s){var i=this.getP13nModel().getProperty("/items").filter(function(I){return I.name===k;});i[0].showIfGrouped=s;this.fireChange({reason:"change",item:i[0]});};a.prototype._selectKey=function(e){Q.prototype._selectKey.apply(this,arguments);var l=e.getSource().getParent().getParent();var n=e.getParameter("selectedItem").getKey();l.getContent()[0].getContent()[1].getItems()[0].setEnabled(n!==this.NONE_KEY);};return a;});
