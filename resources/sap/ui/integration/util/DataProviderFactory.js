/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/integration/util/ServiceDataProvider","sap/ui/integration/util/RequestDataProvider","sap/ui/integration/util/CacheAndRequestDataProvider","sap/ui/integration/util/DataProvider","sap/ui/integration/util/ExtensionDataProvider","sap/ui/integration/util/JSONBindingHelper","sap/ui/integration/util/BindingHelper"],function(B,S,R,C,D,E,J,a){"use strict";var b=B.extend("sap.ui.integration.util.DataProviderFactory",{constructor:function(d,e,c,o,h){B.call(this);this._oDestinations=d;this._oExtension=e;this._oCard=c;this._oEditor=o;this._oHost=h;this._aDataProviders=[];this._aFiltersProviders=[];}});b.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);if(this._aDataProviders){this._aDataProviders.forEach(function(d){if(!d.bIsDestroyed){d.destroy();}});this._aDataProviders=null;this._aFiltersProviders=null;}this._oCard=null;this._oExtension=null;this._bIsDestroyed=true;};b.prototype.isDestroyed=function(){return this._bIsDestroyed;};b.prototype.create=function(d,s,i){var c=this._oCard,e=this._oEditor,h=this._oHost||(c&&c.getHostInstance())||(e&&e.getHostInstance()),u=h&&h.bUseExperimentalCaching,o,f;if(!d){return null;}if(c){o={"baseRuntimeUrl":c.getRuntimeUrl("/"),"settingsJson":J.createJsonWithBindingInfos(d,c.getBindingNamespaces())};}else if(e){o={"baseRuntimeUrl":e.getRuntimeUrl("/"),"settingsJson":J.createJsonWithBindingInfos(d,e.getBindingNamespaces())};}else{o={"settingsJson":J.createJsonWithBindingInfos(d,{})};}if(d.request&&u){f=new C(o);f.setCard(c);f.setHost(h);}else if(d.request){f=new R(o);}else if(d.service){f=new S(o);}else if(d.json){f=new D(o);}else if(d.extension){f=new E(o,this._oExtension);}else{return null;}if(c){a.propagateModels(c,f);}else if(e){a.propagateModels(e,f);}f.bindObject("/");f.setDestinations(this._oDestinations);if(f.isA("sap.ui.integration.util.IServiceDataProvider")){f.createServiceInstances(s);}this._aDataProviders.push(f);if(i){this._aFiltersProviders.push(f);}else{f.setDependencies(this._aFiltersProviders);}return f;};b.prototype.remove=function(d){var p=this._aDataProviders.indexOf(d);if(p>-1){this._aDataProviders.splice(p,1);}if(d&&!d.bDestroyed&&d._bIsDestroyed){d.destroy();}};return b;});
