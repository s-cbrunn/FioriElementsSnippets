/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/cards/BaseContent","sap/ui/integration/util/BindingResolver","sap/ui/integration/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log","sap/ui/model/Sorter"],function(B,a,l,F,b,L,S){"use strict";var c=B.extend("sap.ui.integration.cards.BaseListContent",{metadata:{library:"sap.ui.integration"},renderer:{apiVersion:2}});c.prototype.init=function(){B.prototype.init.apply(this,arguments);this._oAwaitingPromise=null;};c.prototype.exit=function(){B.prototype.exit.apply(this,arguments);this._oAwaitingPromise=null;};c.prototype.setConfiguration=function(C,t){B.prototype.setConfiguration.apply(this,arguments);if(!C){return this;}var o=this.getInnerList(),m=C.maxItems;if(o&&m){o.setGrowing(true);o.setGrowingThreshold(parseInt(m));o.addStyleClass("sapFCardMaxItems");}return this;};c.prototype.getInnerList=function(){return null;};c.prototype._checkHiddenNavigationItems=function(i){if(!i.actions){return;}if(!this.getInnerList()){return;}var I=this.getInnerList(),d=I.getItems(),p=[],A=i.actions[0],s,v=0;if(!A||!A.service||A.type!=="Navigation"){return;}if(A.service==="object"){s=A.service.name;}else{s=A.service;}d.forEach(function(o){var P=a.resolveValue(A.parameters,this,o.getBindingContext().getPath());p.push(this._oServiceManager.getService(s).then(function(n){if(!n.hidden){return false;}return n.hidden({parameters:P});}).then(function(h){o.setVisible(!h);if(!h){v++;}}).catch(function(m){L.error(m);}));}.bind(this));this.awaitEvent("_filterNavItemsReady");var e=this._oAwaitingPromise=Promise.all(p).then(function(){if(this._oAwaitingPromise===e){if(this.getModel("parameters")){this.getModel("parameters").setProperty("/visibleItems",v);}this.fireEvent("_filterNavItemsReady");}}.bind(this));};c.prototype._awaitPromises=function(p){var d=this._oAwaitingPromise=Promise.all(p);d.then(function(){if(this._oAwaitingPromise===d){this.fireEvent("_filterNavItemsReady");}}.bind(this));};c.prototype._getGroupSorter=function(g){var d=false;if(g.order.dir&&g.order.dir==="DESC"){d=true;}var s=new S(g.order.path,d,function(C){return a.resolveValue(g.title,C.getModel(),C.getPath());});return s;};return c;});
